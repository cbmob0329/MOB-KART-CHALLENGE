<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>Runner – Drive Mode</title>
  <meta name="theme-color" content="#0b0c10" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
<div id="root">
  <div id="phone">
    <!-- HUD -->
    <header class="hud">
      <div class="pill" id="dist">距離 0 m</div>
      <div class="pill" id="speed">速度 0 km/h</div>
      <div class="pill" id="jump">ジャンプ 2</div>
      <div class="pill" id="score">SCORE 0</div>
      <div class="status">
        <div class="pill">BOOST <span id="boostPct">100%</span></div>
        <div class="pill" id="wings" style="display:none;">WINGS <span id="wingsLeft">5.0s</span></div>
        <div class="pill" id="engine" style="display:none;">ENGINE <span id="engineLeft">10.0s</span></div>
      </div>
    </header>

    <!-- Game -->
    <main class="play"><canvas id="game" width="390" height="540"></canvas></main>

    <!-- Controls -->
    <footer class="ctrl">
      <button class="btn" id="btnJump">ジャンプ</button>
      <div class="slots">
        <div class="slot empty" id="slot0"><button aria-label="slot 1"></button></div>
        <div class="slot empty" id="slot1"><button aria-label="slot 2"></button></div>
      </div>
      <button class="btn" id="btnBoost">BOOST!</button>
    </footer>

    <!-- Overlay（キャラ選択 = スタートボタンの役割） -->
    <div id="overlay">
      <div class="card">
        <p style="margin:0 0 8px;font-weight:800;">キャラクターを選択してスタート</p>
        <div class="choices">
          <div class="choice" data-char="VR"><img src="VR.png" alt="VR"><small>MOBVR</small></div>
          <div class="choice" data-char="orange"><img src="orange.png" alt="orange"><small>MOBオレンジ</small></div>
          <div class="choice" data-char="pink"><img src="pink.png" alt="ピンク"><small>MOBピンク</small></div>
          <div class="choice" data-char="chi"><img src="chi.png" alt="中華店主"><small>MOB中華店主</small></div>
          <div class="choice" data-char="green"><img src="green.png" alt="グリーン"><small>MOBグリーン</small></div>
          <div class="choice" data-char="redblue"><img src="redblue.png" alt="レッドブルー"><small>MOBレッドブルー</small></div>
        </div>
      </div>
    </div>

    <div id="loading"><div class="bubble">画像読み込み中…</div></div>

    <div id="gameover">
      <div class="panel">
        <div style="font-size:28px;">GAME OVER</div>
        <div id="scoreBreakdown" style="font:600 14px/1.6 system-ui; opacity:.9; text-align:center;">
          <!-- スコア内訳をJSで挿入 -->
        </div>
        <button class="btn" id="retryBtn">リトライ</button>
      </div>
    </div>
  </div>
</div>

<!-- ▼▼ レース中のみ流れるBGM（ループ） ▼▼ -->
<audio id="bgm" src="mobkart.m4a" preload="auto" loop></audio>
<!-- ▲▲ ------------------------------------ ▲▲ -->

<script src="main.js" defer></script>
</body>
</html>
